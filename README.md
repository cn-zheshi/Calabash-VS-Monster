# 葫芦娃大战妖精

回合制下棋游戏，移动方式参考日本将棋、国际象棋以及中国象棋，根据背景添加特色技能机制。

葫芦娃方兵力较少，单兵能力强劲；

妖精方兵力雄厚，单兵能力低下，`king`单位即蝎子精和蛇威胁较大。

## 游戏流程

玩家进入客户端后选择匹配玩家，系统会自动匹配其它玩家。

匹配结束后，由系统随机指定双方阵营并初始化角色配置。

各个阵营在棋盘上位置固定，葫芦娃在上，妖精在下，葫芦娃先手。

双方在自己的回合可以施放不限制次数的技能和进行一次移动，本回合结束的标志为玩家手动点击`TurnEnd`。

若单位选择移动至和敌方单位重合的格子，视为一次攻击；若没有击杀不会移动，击杀则移动至敌方单位阵亡处。

以双方的`king`单位全部阵亡为游戏结束标志，葫芦娃方是爷爷，妖精方是蝎子精和蛇精。

## 阵营、角色简介

本部分主要介绍各阵营兵力配置和单兵能力。

### 葫芦娃方

兵力配置：7个葫芦娃，1个爷爷。

具体如下图所示。

![葫芦娃方兵力配置]()

|角色|移动方式|能力|CD/(回合/次数)|
|---|---|---|---|
|大娃|直线|冲击波，击杀自身半径1格之外的前后左右4格内的所有敌方单位|5|
|二娃|直线|洞察，使敌不敢轻举妄动，封印敌方全体技能1回合|1次|
|三娃|前后左右各1格，左前1格右前1格|金刚不坏，本回合免疫死亡|6|
|四娃|前后左右各2格|喷火，击杀自己所在直线上的第1个敌方单位，己方免疫|5|
|五娃|前后左右各2格|喷水，使自身所在直线上的第1个敌方单位封印1回合|5|
|六娃|日字|隐身，使自身在下1回合无法被敌方选中|5|
|七娃|左前左后右前右后各1格，正前方1格|紫金葫芦封印，选择1个敌方`king`单位使之下1回合不能使用技能|5|
|爷爷|周围8格|召唤，在自身周围随机8格内召唤1个自定义葫芦娃，死去的葫芦娃会复活，活着的葫芦娃会传送|1次|

### 妖精方

兵力配置：1个蝎子精，1个蛇精，初始20个普通妖精。

具体如下图所示。

![妖精方兵力配置]()

|角色|移动方式|能力|CD/(回合/次数)|
|---|---|---|---|
|蛇精|直线、斜线|蛊惑，控制1个葫芦娃的移动控制权，只能进行移动；夺取其技能并且必须立即使用，使用后葫芦娃技能进入冷却；不可以夺取只能使用一次的技能。|10|
|蝎子精|周围8格|弱者退散，使1个葫芦娃后退1格并封印1回合|4|
|普通妖精|前1格，左右各1格|进入敌阵时可选择升级为高级妖精，升级后回到正常状态|无|
|高级妖精|左前右前左后右后各2格|无|无|

注意：

- 封印是指技能和行动均无法操作，封印技能仅仅是技能无法使用
- 对于隐身单位，无法选中意味着敌方无法攻击此单位，也无法移动到该单位所在位置
- 蝎子精让葫芦娃后退一格的过程中，后方如果是边界或者葫芦娃方单位则后退失败，如果是妖怪一方则会击杀妖怪，也算还原反派坑队友的情节了

##  心得体会

- 最大的心得体会是，没有框架的情况下，无论怎么解耦都无法做到职责的完全分离，很是让人头疼；
- 单例模式要慎用，静态变量是魔鬼。


